
<!DOCTYPE html>
<html>
<title>W3.CSS Template</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<style>
body,h1 {font-family: "Raleway", sans-serif}
body, html {height: 100%}
.bgimg {
    
	 background-color: black;
    min-height: 100%;
    background-position: center;
    background-size: cover;
}
</style>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>
  	<script type="text/javascript">
      humid = 0;
      temp = 0;
    client = new Paho.MQTT.Client("iot.eclipse.org", Number(80) , "/ws", "myClientId2" + new Date().getTime());
    //client = new Paho.MQTT.Client("192.168.2.1", 1884,"myClientId" + new Date().getTime());
    // set callback handlers
    client.onConnectionLost = function (responseObject) {
      console.log("Connection Lost: "+responseObject.errorMessage);
      client.connect();
    }
    // Called when the connection is made
    function onConnect(){
      console.log('Connected!');
      client.subscribe('tactx/unterach/wss/temperatures');
    }
    // Connect the client, providing an onConnect callback
    client.connect({
      onSuccess: onConnect
    });
    client.onMessageArrived = function (message) {
      
      
      data = JSON.parse(message.payloadString);
      console.log("payload " + JSON.stringify(data.payload.values));
      
      //console.log("temppayload " + JSON.parse(message.payloadString));
      displayTemperature(data.payload.values);
    }
    
    function displayTemperature(temperatures) {
      //document.getElementById("item0").innerHTML = temperatures[0] + '°C';
      document.getElementById("temperature").innerHTML = temperatures[1] + '°C';
      //document.getElementById("item2").innerHTML = temperatures[2] + '°C';
      //document.getElementById("item3").innerHTML = temperatures[3] + '°C';
      //document.getElementById("item4").innerHTML = temperatures[4] + '°C';
    }
    document.addEventListener("DOMContentLoaded", function(event) {
      console.log("DOM fully loaded and parsed");
      displayTemperature(["--.--", "--.--", "--.--", "--.--", "--.--"]);
      document.body.style.backgroundColor = "black";
      
    });
  </script>

<div class="bgimg w3-display-container w3-animate-opacity w3-text-white">
  <div class="w3-display-topleft w3-padding-large w3-xlarge">
    tactx-io
  </div>
  <div class="w3-display-middle">
    <h1 class="w3-jumbo w3-animate-top">UNDER CONSTRUCTION</h1>
    <hr class="w3-border-grey" style="margin:auto;width:40%">
    <p class="w3-large w3-center">Coming Soon</p>
  </div>

  <div class="w3-display-bottommiddle">
    <p class=" w3-small w3-center">Have you ever wondered what the actual temperature of the Attersee is?</p>
    <p id="temperature" class="w3-large w3-center">--.--°C</p>
  </div>

  <div class="w3-display-bottomleft w3-padding-large">
    Powered by <a href="https://www.w3schools.com/w3css/default.asp" target="_blank">w3.css</a>
  </div>
</div>

</body>
</html>